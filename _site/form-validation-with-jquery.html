<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<title>Form validation with jQuery</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description" content="Bec d'état, Rebecca Scott's personal blog"/>
		<meta name="author" content="Rebecca Scott"/>
		<link rel="icon" href="/favicon.ico"/>
		<link href="//fonts.googleapis.com/css?family=Cinzel" rel="stylesheet" type="text/css"/>
		<link href="//fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css"/>
		<link href="/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
		<link href="/lib/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/>
		<link href="/css/site.css" rel="stylesheet"/>
	</head>
	<body>
		<div class="container">
			<div class="row header">
				<h1><a href="https://becdetat.com">Bec d'état</a></h1>
				<h2><a href="https://becdetat.com">Rebecca Scott's Blog</a></h2>
			</div>
		</div>

		<hr/>

		<div class="container">
			<div class="row content">
				<h1><a href="/">~/</a>Form validation with jQuery <br/></h1>
<h2><small><em>09 Dec 2009</em></small></h2>

<p>Every time I’ve implemented client-side form validation I’ve started from scratch and done it a little differently. Usually it devolves into a messy set of <code class="language-plaintext highlighter-rouge">if</code> statements and duplicated code. Here’s my latest method, which separates the validation rules from the processing. This will only handle relatively simple validation cases.</p>

<p>So start with a form:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;form id="mailingListSubscription" action="subscribe.php"&gt;
    Name: &lt;input type="text" name="name" id="name" /&gt;&lt;br /&gt;
    Email: &lt;input type="text" name="email" id="email" /&gt;&lt;br /&gt;
    Phone: &lt;input type="text" name="phone" id="phone" /&gt;&lt;br /&gt;
    &lt;button type="submit"&gt;Subscribe&lt;/button&gt;
&lt;/form&gt;
</code></pre></div></div>

<p>All fields are required, and I’m going to use some magical regex (found on the interthingy somewhere) to validate the email address. This script sets up the rules:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var rules = [
    { id: 'name', test: function(val) { return val != ''; }, msg: 'Please enter your name' },
    { id: 'email', test: function(val) { return val.search(/^[^@]+@[^@]+.[a-z]{2,}$/i) != -1; }, msg: 'Please enter a valid email address' },
    { id: 'phone', test: function(val) { return val != ''; }, msg: 'Please enter your phone number' }
];
</code></pre></div></div>

<p>Each rule has the id of the form element being tested, a message that gets displayed on failing the rule, and a function that validates the value of the form element. I also could add multiple rules for the one input.</p>

<p>This script sets up the submit handler for the form, which does the validation using the array of rules set up above:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$(function(){
    $('form#mailingListSubscription').submit(function(){
        for (var i = 0; i &lt; rules.length; i ++) {
            var rule = rules[i];
            var target = $('#'+rule.id);
            if (!rule.test(target.val())) {
                alert(rule.msg);
                target.focus();
                return false;
            }
        }
        return true;
    });
});
</code></pre></div></div>

<p>On a test failing, the rule’s msg value is shown and the target of the test gets focus. This could be changed to something more user friendly like showing the message next to the target field.</p>



<br/>

<div id="disqus_thread"></div>
<script>
    (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://becdetat.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

			</div>
		</div>

		<hr/>

		<div class="container">
			<div class="row footer">
				<p><small>
					Content &copy; 2008-2022 Rebecca Scott<br/>
					<a href="https://www.linkedin.com/in/rebecca-scott-b522a418/" target="_blank">LinkedIn</a> |
					<a href="https://github.com/becdetat" target="_blank">GitHub</a> |
					<a href="mailto:me@becdetat.com">me@becdetat.com</a>
				</small></p>
			</div>
		</div>

		<script src="/lib/jquery-2.0.2.min.js"></script>
		<script src="/lib/bootstrap/js/bootstrap.min.js"></script>
		<script src="//google-code-prettify.googlecode.com/svn/loader/run_prettify.js" type="text/javascript"></script>
		<script src="/js/site.js"></script>
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-67018713-1', 'auto');
		  ga('send', 'pageview');
		</script>
	</body>
</html>
