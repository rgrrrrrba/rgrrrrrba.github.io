<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<title>ObjectMother - Part 1 - What is ObjectMother?</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description" content="Ben d'état. Ben Scott's personal blog. The site formerly known as Red, Green, Refactor, Red, Red, Red, Revert, Back Away, the site formally known as Belfry Images."/>
		<meta name="author" content="Ben Scott"/>
		<link href="http://fonts.googleapis.com/css?family=Cinzel" rel="stylesheet" type="text/css"/>
		<link href="http://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css"/>
		<link href="/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
		<link href="/lib/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/>
		<link href="/css/site.css" rel="stylesheet"/>
	</head>
	<body>
		<div class="container">
			<div class="row header">
				<h1><a href="http://bendetat.com">Ben d'état</a></h1>
				<h2><a href="mailto:ben@swxben.com">Ben Scott</a></h2>
			</div>
		</div>

		<hr/>
		
		<div class="container">		
			<div class="row content">
				<h1><a href="/">~/</a>ObjectMother - Part 1 - What is ObjectMother? <br/></h1>
<p class="twitter-link"><a href="https://twitter.com/share" class="twitter-share-button" data-via="bendetat">Tweet</a></p>
<h2><small><em>08 May 2014</em></small></h2>



<p>This is the first part in an five part series of posts about the ObjectMother test factory pattern.</p>

<ol>
  <li>Introduction - What is ObjectMother?</li>
  <li>Basic implementation</li>
  <li>Issues with implementations seen in the wild</li>
  <li>A more robust implementation</li>
  <li>Focussed tests and executable documentation - Conclusion</li>
</ol>

<p>ObjectMother is an established but little used pattern in testing. As <a href="http://martinfowler.com/bliki/ObjectMother.html">described by Martin Fowler</a>, an object mother is essentially a well-structured minimal example of a factory.</p>

<p>Fowler’s sparing description is essentially of a pattern whereby a pre-canned instance of an object used for testing - usually a domain object - can be created and retrieved using a common and shared interface.</p>

<h2 id="basic-example-of-the-objectmother-pattern">Basic example of the ObjectMother pattern</h2>

<p>As a basic example, say we’re testing a payment processor:</p>

<pre><code>var processor = new PaymentProcessor();
var person = new Person("Ben", "Scott", new DateTime(2012, 1, 1), PayGrade.Developer, EmploymentType.FullTime);

var payment = processor.Process(person, ..);

// asserts, etc.
</code></pre>

<p>The line that we’re interested is where <code>person</code> gets instantiated. Every time we need to test something that operates on a person object, we need to create a new instance of a person. <code>Person</code>’s constructor looks like this:</p>

<pre><code>public Person(string firstName, string lastName, DateTime startDate, PayGrade paygrade, EmploymentType employmentType)
{
    // ...
}
</code></pre>

<p>All the payment processor is actually interested in is the pay grade and the employment type:</p>

<pre><code>public class Payment Processor
{
    public Payment Process(Person person)
    {
        var multiplier = GetMultipler(person.EmploymentType);
        switch (person.PayGrade) 
        {
            //...
        }
        // ...
    }
}
</code></pre>

<p>Obviously the payment processor could just take the pay grade and employment type as arguments but that is an implementation detail. Other properties on <code>Person</code> may also be used, so we’ll assume that the processor requires a person to process, and what happens with those other properties aren’t what we’re interested in testing in this example.</p>

<p>So back to what I mentioned above:</p>

<blockquote>
  <p>Every time we need to test something that operates on a person object, we need to create a new instance of a person.</p>
</blockquote>

<p>This is problematic for at least two reasons:</p>

<ol>
  <li>Duplication of code, and</li>
  <li>Reduced clarity of tests</li>
</ol>

<p>Reducing the duplication of code is the main selling point of ObjectMother that Fowler alludes to. Centralising the instantiation of these test objects reduces duplication and makes the test objects well known.</p>

<p>In my opinion, improving the clarity of the tests is a bigger </p>




<br/>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'bendetat'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


			</div>
		</div>

		<hr/>

		<div class="container">			
			<div class="row footer">
				<p><small>
					Content &copy; 2008-2014 Ben Scott<br/>
					<a href="https://twitter.com/bendetat">@bendetat</a> |
					<a href="mailto:ben@swxben.com">ben@swxben.com</a> |
					<a href="https://github.com/bendetat">github.com/bendetat</a> |
					<a href="http://www.swxben.com">Software by Ben Pty Ltd</a> | <a href="http://www.swxben.com">SWXBEN</a>
				</small></p>
			</div>
		</div>

		<script src="/lib/jquery-2.0.2.min.js"></script>
		<script src="/lib/bootstrap/js/bootstrap.min.js"></script>
		<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js" type="text/javascript"></script>
		<script src="/js/site.js"></script>
	</body>
</html>